"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[363],{6242:function(e,r,t){var n=t(5861),a=t(7757),o=t.n(a),u=t(4569),c=t.n(u)().create({baseURL:"https://api.themoviedb.org/3/trending/movie/day"}),i=function(){var e=(0,n.Z)(o().mark((function e(r,t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,c.get("https://api.themoviedb.org/3/".concat(r),{params:{api_key:"2e46478410a3b7ef74a24e2b089ec9d3"}});case 3:n=e.sent;case 4:if(!t){e.next=8;break}return e.next=7,c.get("https://api.themoviedb.org/3/".concat(r),{params:{api_key:"2e46478410a3b7ef74a24e2b089ec9d3",query:t}});case 7:n=e.sent;case 8:return console.log(n),e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}();r.Z=i},4598:function(e,r,t){var n=t(9982),a=t(184);r.Z=function(){return(0,a.jsx)(n.p2,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"circles-loading",wrapperStyle:{},wrapperClass:"",visible:!0})}},4363:function(e,r,t){function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}t.r(r),t.d(r,{default:function(){return v}});var u=t(5861),c=t(8152),i=t(7757),s=t.n(i),l=t(2791),p=t(3504),f=t(6242),b=t(4598),h={form:"Movies_form__MWvXj",input:"Movies_input__aaq4I",button:"Movies_button__M1bgu"},d=t(184),v=function(e){var r=e.onClick,t=e.queryProp,n=e.queryChange,a=(0,l.useState)([]),i=(0,c.Z)(a,2),v=i[0],g=i[1],m=(0,l.useState)(""),y=(0,c.Z)(m,2),x=y[0],j=y[1],k=(0,l.useState)({loading:!1,submitted:!1,query:""}),w=(0,c.Z)(k,2),O=w[0],_=w[1],S=(0,l.useState)({hasError:!1,errorMsg:""}),Z=(0,c.Z)(S,2),q=Z[0],P=Z[1],M=(0,l.useRef)("true");(0,l.useEffect)((function(){if(r(),t){var e=function(){var e=(0,u.Z)(s().mark((function e(){var r,t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("query"),e.next=4,(0,f.Z)("search/movie",r);case 4:t=e.sent,n=t.results,g(n),_((function(e){return o(o({},e),{},{submitted:!0})})),O.loading&&_((function(e){return o(o({},e),{},{loading:!1})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}else{var n=function(){var e=(0,u.Z)(s().mark((function e(){var r,t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=O.query,localStorage.setItem("query",r),!M.current){e.next=6;break}return M.current=!1,e.abrupt("return");case 6:return e.next=8,(0,f.Z)("search/movie",r);case 8:if(t=e.sent,0!==(n=t.results).length||M.current){e.next=14;break}return _((function(e){return o(o({},e),{},{loading:!1})})),P({hasError:!0,errorMsg:"No matches found"}),e.abrupt("return");case 14:g(n),P({hasError:!1,errorMsg:""}),O.loading&&_((function(e){return o(o({},e),{},{loading:!1})})),console.log(n),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();n()}}),[O,r,t]);var E=null===v||void 0===v?void 0:v.map((function(e){return(0,d.jsx)("li",{children:(0,d.jsx)(p.rU,{className:h.link,to:"/movies/".concat(e.id),children:e.title})},e.id)}));return(0,d.jsxs)("div",{children:[(0,d.jsxs)("form",{className:h.form,action:"submit",onSubmit:function(e){e.preventDefault(),n(),localStorage.setItem("query",x),_((function(){return{loading:!0,submitted:!0,query:x}}))},children:[(0,d.jsx)("input",{className:h.input,type:"text",value:x,onChange:function(e){j(e.target.value)}}),(0,d.jsx)("button",{className:h.button,type:"submit",children:"Search"})]}),O.loading&&(0,d.jsx)(b.Z,{}),O.submitted&&(0,d.jsx)("ul",{children:E}),q.hasError&&(0,d.jsx)("h4",{children:q.errorMsg})]})}}}]);
//# sourceMappingURL=363.c13381ae.chunk.js.map